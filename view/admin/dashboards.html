{% extends 'admin/layout.html' %}

{% block title %}
Bell - Admin Dashboards
{% endblock %}

{% block csslink %}
<link rel="stylesheet" href="{{ url('static/css/admin/dashboards.css') }}" type="text/css" />
{% endblock %}

{% block mainTitle %}
Dashboards
{% endblock %}

{% block nav_admin_dashboards_class %}class="active"{% endblock %}

{% block adminMainContent %}
<!-- Create dashboard -->
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#createDashboard">Create Dashboard</button>
<div class="modal fade" id="createDashboard" tabindex="-1" role="dialog" aria-labelledby="createDashboardLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="createDashboardLabel">Create dashboard</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" action="{{ url('/admin/dashboards') }}" method="post">
          <fieldset>
            <div class="form-group">
              <label for="inputName" class="col-lg-2 control-label">Name</label>
              <div class="col-lg-10">
                <input type="text" name="name" class="form-control" id="inputName" placeholder="Name">
              </div>
            </div>
            <div class="form-group">
              <label for="textAreaPatterns" class="col-lg-2 control-label">Patterns</label>
              <div class="col-lg-10">
                <textarea name="patterns" class="form-control" rows="7" id="textAreaPatterns"></textarea>
                <span class="help-block">Metric name patterns, one line for one pattern, e.g. timer.mean_90.*</span>
              </div>
            </div>
            <div class="form-group">
              <div class="col-lg-10 col-lg-offset-2">
                <button type="reset" class="btn btn-default">Cancel</button>
                <button type="submit" class="btn btn-primary">Submit</button>
              </div>
            </div>
          </fieldset>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- List dashboards -->
<table class="table table-bordered dashboards-list">
  <thead>
    <tr>
      <th>#</th>
      <th>Dashboard Name</th>
      <th>Patterns Count</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for id, dashboard in dashboards %}
    <tr>
      <td>{{ dashboard.id }}</td>
      <td>{{ dashboard.name }}</td>
      <td>{{ dashboard.patterns | length }}</td>
      <td></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<ul class="list-group dashboards-list">
</ul>
{% endblock %}

<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Bell - Realtime anomalous metrics detection</title>
    <link rel="shortcut icon" href="{{url('static/img/bell.png')}}">
    <link rel="stylesheet" href="{{url('static/css/style.css')}}" type="text/css" />
    <link rel="stylesheet" href="{{url('static/css/cubism.css')}}" type="text/css" />
    <script src="{{url('static/js/d3.min.js')}}"></script>
    <script src="{{url('static/js/cubism.v1.min.js')}}"></script>
  </head>
  <body>
    {# header #}
    <div class="header">
      <a href="{{url('/')}}" class="logo">
        <img src="{{url('static/img/logo.png')}}"/>
      </a>
    </div>

    {# container #}
    <div class="container">

      <div class="form-box">
        <form id="form" action="" method="get" accept-charset="utf-8" onsubmit="submitform();return false;">
          <input name='pattern' type="text" placeholder="Pattern.."  autofocus="autofocus">
        </form>
      </div>

      <div class="tabnav">
        <span class="tab-description">
          Trending Since
        </span>
        <ul class="tabs">
          {%set timeSpans = ['15m', '45m', '60m', '90m', '3h']%}
          {%set timeSpanTexts = ['15 minutes', '45 minutes', '60 minutes', '90 minutes', '3 hours']%}
          {%for index, timeSpan in timeSpans %}
          <li {%if since === timeSpan%}class="active"{%endif%}>
            <a href="{{url('/', pattern) + '?since=' + timeSpan}}">{{timeSpanTexts[index]}}</a>
          </li>
          {%endfor%}
        </ul>
      </div>

      <div id="chart">
      </div>

    </div>
  </body>
</html>
<script src="{{url('static/js/script.js')}}"></script>
<script>
  function submitform() {
    window.location.href = "{{url('/')}}" + document.getElementById('form').pattern.value;
  }

  var root = '{{url('/')}}';

  window.onload = function() {
    initBell('{{type}}', '{{pattern}}', '{{limit}}', '{{since}}', '{{url('/api')}}');
  }
</script>
